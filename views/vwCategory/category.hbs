{{#section 'css'}}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.css">
{{/section}}


{{#section 'js'}}
<script src="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.js"></script>
{{#each courses}}
<script>
  $(function () {
    $('.rating{{id}}').rateYo({
      starWidth: '15px',
      readOnly: true,
      rating: {{ rate }}
    });
  });
</script>
{{/each}}
{{/section}}


<div class="container mt-5 mb-5">
  <h1 class="mb-5">{{categoryName}}</h1>
  {{#if courses}}
  <div class="row">
    {{#each courses}}
    <div class="col-sm-4 mb-5 d-flex align-items-stretch">
      <div class="card" style="width: 18rem;">
        <img src="../public/img/courses/{{id}}/small_thumbnail.jpg" class="card-img-top imgBorder" alt="{{title}}">
        <div class="card-body">
          <h5 class="card-title">{{title}}</h5>
          <h6 class="card-subtitle mb-2 text-muted">{{lecturername}}</h6>
          <span class="text-danger" style="vertical-align: middle;"><strong>{{rate}}</strong></span>
          <div class="rating{{id}}" style="display: inline-block;"></div>
          <span style="vertical-align: middle; color: #6C757D">({{format numrate}})</span>
          <p class="card-text">{{tinydes}}</p>
          <p>
            <strong>${{format_real_num promotionalprice}}</strong>
            &nbsp;
            <del style="color: #6C757D;">${{format_real_num originalprice}}</del>
          </p>
          <p class="card-text"><small class="text-muted">Category: </small><a href="/category/{{categoryid}}"
              class="card-link"><small>{{categoryname}}</small></a></p>
        </div>
        <div class="card-footer">
          <div class="d-flex justify-content-center">
            <a class="btn btn-primary mr-1" href="/course/{{id}}" role="button">
              <i class="fas fa-info-circle"></i>
              Detail
            </a>
            <button class="btn btn-success" type="submit">
              <i class="fas fa-cart-plus"></i>
              Add to cart
            </button>
          </div>
        </div>
      </div>
    </div>
    {{/each}}
  </div>
  {{else}}
  <h4 class="text-danger">No course has been found</h4>
  {{/if}}
  {{#if pageItems}}
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      <li class="page-item {{#unless canGoPrevious}}disabled{{/unless}}">
        <a class="page-link" href="?page={{previousPage}}" tabindex="-1" aria-disabled="true">Previous</a>
      </li>
      {{#each pageItems}}
      {{#if isActive}}
      <li class="page-item active"><a class="page-link" href="?page={{value}}">{{value}}</a></li>
      {{else}}
      <li class="page-item"><a class="page-link" href="?page={{value}}">{{value}}</a></li>
      {{/if}}
      {{/each}}
      <li class="page-item {{#unless canGoNext}}disabled{{/unless}}">
        <a class="page-link" href="?page={{nextPage}}">Next</a>
      </li>
    </ul>
  </nav>
  {{/if}}
</div>